<div class="history-wrap" *ngIf="!loading; else loadingTpl">
  <div class="head-row">
    <h2 class="title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠ <span class="muted">({{ items.length }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</span></h2>

    <div class="filters">
      <button class="pill" [class.active]="filter==='all'" (click)="setFilter('all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      <button class="pill" [class.active]="filter==='month'" (click)="setFilter('month')">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</button>
      <button class="pill" [class.active]="filter==='3m'" (click)="setFilter('3m')">3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
    </div>
  </div>

  <ng-container *ngIf="view.length; else emptyTpl">
    <div class="list">
      <div class="tx-card" *ngFor="let t of view; trackBy: trackById">
        <div class="icon">üïπÔ∏è</div>

        <div class="mid">
          <div class="row1">
            <span class="badge badge-blue">‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Å‡∏°</span>
          </div>
          <div class="row2">{{ t.detail || '‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Å‡∏°' }}</div>
        </div>

        <div class="right">
          <div class="amount minus">-{{ t.amount | number:'1.0-0' }} ‡∏ø</div>
          <div class="status">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>
        </div>
      </div>
    </div>

    <div class="summary">
      <div class="label">‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ:</div>
      <div class="total">-{{ totalSpent | number:'1.0-0' }} ‡∏ø</div>
    </div>
  </ng-container>
</div>

<ng-template #loadingTpl>
  <div class="loading">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠...</div>
</ng-template>

<ng-template #emptyTpl>
  <div class="empty">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠</div>
</ng-template>
