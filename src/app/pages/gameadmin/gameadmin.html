<div class="container">
  <!-- ‡πÅ‡∏ñ‡∏ß‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° -->
  <div class="toolbar">
    <button class="btn btn-primary" (click)="openCreate()" type="button">
      Add Game
    </button>

    <div class="count">‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î : {{ filtered.length }}</div>

    <div class="search">
      <input
        type="text"
        placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..."
        [(ngModel)]="keyword"
      />
      <span class="icon">üîé</span>
    </div>
  </div>

  <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏° -->
  <div class="list" *ngIf="!loading; else loadingTpl">
    <div class="card" *ngFor="let g of filtered">
      <div class="left">
        <div class="thumb">
          <img [src]="g.imageUrl || '/images/true.png'" alt="" />
        </div>
        <div class="name">{{ g.name }}</div>
      </div>

      <div class="right">
        <button class="btn btn-ghost" (click)="openEdit(g)">Edit</button>
        <button class="btn btn-danger" (click)="onDelete(g)">Delete</button>
      </div>
    </div>

    <div *ngIf="filtered.length === 0" class="empty">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</div>
  </div>

  <ng-template #loadingTpl>
    <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‚Ä¶</div>
  </ng-template>
</div>

<!-- Modal Add/Edit -->
<div class="modal-backdrop" *ngIf="showModal" (click)="closeModal()"></div>
<div class="modal" *ngIf="showModal">
  <form #f="ngForm" (ngSubmit)="onSubmit(f)" novalidate>
    <h2>{{ mode === 'create' ? '‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°' : '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏Å‡∏°' }}</h2>

    <label class="field">
      <span>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏° *</span>
      <input type="text" [(ngModel)]="form.name" name="name" required />
    </label>

    <div class="grid-2">
      <label class="field">
        <span>‡∏£‡∏≤‡∏Ñ‡∏≤ *</span>
        <input type="number" [(ngModel)]="form.price" name="price" min="0" required />
      </label>

      <label class="field">
        <span>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó *</span>
        <select [(ngModel)]="form.category" name="category" required>
          <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
        </select>
      </label>
    </div>

    <label class="field">
      <span>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</span>
      <textarea [(ngModel)]="form.description" name="description" rows="3"></textarea>
    </label>

    <!-- ‚úÖ ‡∏ó‡∏±‡πâ‡∏á create/edit: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå ‡∏´‡∏£‡∏∑‡∏≠ ‡πÉ‡∏™‡πà URL ‡πÑ‡∏î‡πâ -->
    <div class="grid-2">
      <label class="field">
        <span>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ (‡πÑ‡∏ü‡∏•‡πå)</span>
        <input type="file" (change)="onFileSelected($event)" accept="image/*" />
        <small style="color:#b9b9d6">* ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ó‡∏ô URL ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</small>
      </label>

      <label class="field">
        <span>‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πá‡∏ô URL</span>
        <input type="text" [(ngModel)]="form.imageUrl" name="imageUrl" placeholder="https://..." />
      </label>
    </div>

    <div class="preview" *ngIf="previewUrl || form.imageUrl">
      <img [src]="previewUrl || form.imageUrl" alt="preview" />
    </div>

    <div class="actions">
      <button type="button" class="btn btn-ghost" (click)="closeModal()">Cancel</button>
      <button class="btn btn-primary" [disabled]="f.invalid">{{ mode === 'create' ? 'Add' : 'Save' }}</button>
    </div>
  </form>
</div>