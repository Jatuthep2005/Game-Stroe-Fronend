<div class="history-wrap" *ngIf="!loading; else loadingTpl">
  <div class="head-row">
    <h1 class="title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</h1>

    <div class="filters">
      <button type="button"
              class="pill"
              [class.active]="filter==='all'"
              (click)="setFilter('all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      <button type="button"
              class="pill"
              [class.active]="filter==='topup'"
              (click)="setFilter('topup')">‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</button>
      <button type="button"
              class="pill"
              [class.active]="filter==='purchase'"
              (click)="setFilter('purchase')">‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Å‡∏°</button>
    </div>
  </div>

  <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° -->
  <div class="list" *ngIf="filtered.length; else emptyTpl">
    <div class="tx-card" *ngFor="let t of filtered; trackBy: trackById">
      <div class="icon">
        <span *ngIf="t.type==='topup'">üí∏</span>
        <span *ngIf="t.type==='purchase'">üïπÔ∏è</span>
      </div>

      <div class="mid">
        <div class="row1">
          <span class="badge" [class.badge-green]="t.type==='topup'" [class.badge-blue]="t.type==='purchase'">
            {{ t.type==='topup' ? '‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô' : '‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Å‡∏°' }}
          </span>
        </div>
        <div class="row2" *ngIf="t.detail">
          {{ t.detail }}
        </div>
      </div>

      <div class="right">
        <div class="amount" [class.plus]="t.type==='topup'" [class.minus]="t.type==='purchase'">
          {{ (t.amount||0) | number:'1.0-0' }} ‡∏ø
        </div>
        <div class="status">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>
      </div>
    </div>
  </div>

  <!-- ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏ß‡∏° -->
  <div class="summary" *ngIf="filtered.length">
    <div class="label">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô):</div>
    <div class="total">{{ totalTopup | number:'1.0-0' }} ‡∏ø</div>
  </div>
</div>

<!-- Loading -->
<ng-template #loadingTpl>
  <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‚Ä¶</div>
</ng-template>

<!-- Empty -->
<ng-template #emptyTpl>
  <div class="empty">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</div>
</ng-template>
